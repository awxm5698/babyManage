<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1,-->
          <!--maximum-scale=1, user-scalable=no">-->
    <title>Company</title>
    <link href="../static/css/font-awesome.min.css" rel="stylesheet">
    <style>
        .margin-top{margin:130px 0 10px;}
        .margin-down-10{margin:0 0 10px;}
        .nameBg{background:#f3f3f3 !important;font-weight:bold;}
    </style>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="../static/js/createDB.js" type="text/javascript"></script>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="navbar-header">
        <div class="col-xs-12 bg-info text-center margin-down-10">
            <label class="input-lg">客户列表</label>
        </div>
        <div class="col-xs-8">
            <input type="text" class="input-lg" placeholder="公司名称/联系人/电话号码">
        </div>
        <div class="col-xs-4 text-center margin-down-10">
            <button class="btn btn-default btn-lg">搜索</button>
        </div>
    </div>
</nav>
<div class="container  margin-top">
    <div class="row">
        <div class="col-xs-12 text-center margin-down-10" id="center">

        </div>
    </div>
</div>
<div class="modal fade" id="addCompany" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">新增客户</h4>
            </div>
            <div id="msg" class="text-center"></div>
            <form class="form-horizontal" style="margin:20px 10px 10px" method="post"
                  action="#" >
                <div class="form-group">
                    <label for="company" class="col-xs-4 input-lg">公司名</label>
                    <div class="col-xs-8">
                        <input type="text" class="form-control input-lg"
                               placeholder="请输入公司名称" name="company"
                               id="company" required/>
                    </div>
                </div>
                <div class="form-group">
                    <label for="address" class="col-xs-4 input-lg">公司地址</label>
                    <div class="col-xs-8">
                        <input type="text" class="form-control input-lg"
                               placeholder="请输入公司地址" name="address"
                               id="address"/>
                    </div>
                </div>
                <div class="form-group">
                    <label for="contacts" class="col-xs-4 input-lg">联系人</label>
                    <div class="col-xs-8">
                        <input type="text" class="form-control input-lg"
                               placeholder="联系人姓名" name="contacts"
                               id="contacts"/>
                    </div>
                </div>
                <div class="form-group">
                    <label for="phone" class="col-xs-4 input-lg">联系电话</label>
                    <div class="col-xs-8">
                        <input type="text" class="form-control input-lg"
                               placeholder="请输入公司地址" name="phone"
                               id="phone"/>
                    </div>
                </div>
                <div class="form-group">
                    <label for="remarks" class="col-xs-4 input-lg">备注</label>
                    <div class="col-xs-8">
                <textarea class="form-control input-lg" placeholder="备注" name="remarks"
                          id="remarks"></textarea>
                    </div>
                </div>
                <div class="form-group text-center">
                    <button type="button" class="btn btn-primary btn-lg" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary btn-lg" onclick="addCompany()">提交</button>
                </div>
            </form>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<script>
    $(document).ready(function () {
        user_id = sessionStorage.getItem('user_id')
        db.transaction(function (tx) {
        tx.executeSql('SELECT * FROM company WHERE user_id=?', [user_id], function (tx, results) {
            var len = results.rows.length, i;
            if(len==0)
                {
                    btn = '<p>你还没有客户呢，赶紧添加吧！</p>'+
                        '<button class="btn btn-default btn-lg" data-toggle="modal" data-target="#addCompany">添加客户</button>'
                    document.querySelector('#center').innerHTML =  btn;
                }
                else
                {
                    table = ''
                    for(i=0;i<len;i++){
                        var company = results.rows.item(i).company
                        var address = results.rows.item(i).address
                        var contacts = results.rows.item(i).contacts
                        var phone = results.rows.item(i).phone
                        var remarks = results.rows.item(i).remarks
                        table = table + companyTable(company,address,contacts,phone,remarks)
                    }
                  document.querySelector('#center').innerHTML =  table;
                }
        }, null);
        });
    });
</script>
<script src="../static/js/company.js" type="text/javascript"></script>
</body>
</html>